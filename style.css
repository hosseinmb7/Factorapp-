:root{
  --bg:#34495e;
  --card:#5d6d7e;
  --accent:#3498db;
  --text:#ecf0f1;
  --ink:#2c3e50;
  --muted:rgba(236,240,241,.85);
  --danger:#e74c3c;
  --ok:#27ae60;
  --radius:14px;
  --radius-sm:10px;
  --shadow:0 10px 30px rgba(0,0,0,.20);
  --shadow-lg:0 20px 60px rgba(0,0,0,.30);
}

/* theme variants */
.theme-default{}
.theme-bluegrey{
  --bg:#eef6ff;
  --card:#ffffff;
  --accent:#0077cc;
  --text:#0b3b5a;
  --ink:#0b3b5a;
}
.theme-blue{
  --bg:#eef9ff;
  --card:#ffffff;
  --accent:#0066aa;
  --text:#04293a;
  --ink:#04293a;
}
.theme-green{
  --bg:#f2fff4;
  --card:#ffffff;
  --accent:#0aa84f;
  --text:#083a24;
  --ink:#083a24;
}
.theme-dark{
  --bg:#1f1f27;
  --card:#2a2a33;
  --accent:#ffcc00;
  --text:#e9eef6;
  --ink:#e9eef6;
}

*{box-sizing:border-box}
html{font-size:16px}
body{
  font-family:'Tahoma', system-ui, -apple-system, Segoe UI, sans-serif;
  margin:0; direction:rtl; background:var(--bg); color:var(--text);
  -webkit-tap-highlight-color:transparent;
}
input, select, textarea, .selectable{ user-select:text; }
a{ color:inherit; text-decoration:none }
#content{
  margin-top:5rem;
  padding:1rem;
  max-width:1100px;
  margin-right:auto; margin-left:auto;
}
.menu{
  position:fixed; inset:auto 0  auto 0; top:0;
  background:color-mix(in oklab, var(--card) 92%, black 8%);
  backdrop-filter:saturate(1.1) blur(6px);
  display:flex; gap:.5rem; padding:.75rem 1rem; z-index:10;
  box-shadow:0 6px 20px rgba(0,0,0,.25);
  border-bottom:1px solid rgba(255,255,255,.18);
  justify-content:center; flex-wrap:wrap;
}
.menu button{
  background:var(--accent); color:var(--text);
  border:none; border-radius:var(--radius-sm);
  padding:.55rem .9rem; font-size:.9rem; cursor:pointer;
  box-shadow:0 4px 10px rgba(0,0,0,.18);
  transition:transform .08s ease, opacity .2s ease, box-shadow .2s ease;
}
.menu button:hover{ transform:translateY(-1px); opacity:.96; }
.menu button:active{ transform:translateY(0); opacity:.9; }
.menu button.active{ outline:2px solid rgba(255,255,255,.35) }
.menu button:focus-visible{ outline:3px solid #fff; outline-offset:2px; }
.card{
  background:var(--card); border-radius:var(--radius);
  padding:1rem; box-shadow:var(--shadow);
  border:1px solid rgba(255,255,255,.12);
}
.section-header{ margin:.25rem 0 .75rem; font-size:1.15rem; font-weight:700; }
select, input[type="text"]{
  background:#fff; color:var(--ink);
  border:none; border-radius:.6rem; padding:.45rem .7rem;
  font-size:1rem; outline:none; min-height:2.4rem;
}
select:focus-visible, input[type="text"]:focus-visible{
  box-shadow:0 0 0 3px rgba(255,255,255,.12);
}
.date-inputs{ display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; margin-bottom:.5rem; }
.item-row{ display:flex; gap:.5rem; align-items:center; margin-bottom:.5rem; flex-wrap:wrap; }
.item-row select{ flex:2; padding:.35rem .6rem; border-radius:.6rem; color:var(--ink); }
.item-row input{ width:8rem; padding:.45rem .5rem; border-radius:.6rem; text-align:center; font-size:.95rem; color:var(--ink); }
.item-row .lineTotal{ min-width:7.5rem; text-align:center; background:rgba(0,0,0,.12); padding:.5rem .7rem; border-radius:.7rem; font-weight:700; color:var(--text); }
.delete-btn, .table-btn{
  background:rgba(0,0,0,.18); border:none; color:#fff;
  padding:.45rem .65rem; border-radius:.55rem; cursor:pointer;
  min-width:2.25rem; min-height:2.25rem;
}
.delete-btn:hover{ background:rgba(0,0,0,.28) }
.table-btn.edit{ background:rgba(0,0,0,.22) }
.table-btn.edit:hover{ background:rgba(0,0,0,.30) }
.totalbar{ margin-top:.5rem; display:flex; align-items:center; gap:.5rem; flex-wrap:wrap; }
#totalAmount{ font-weight:800; color:#fff; display:inline-block; padding:.25rem .6rem; background:rgba(0,0,0,.12); border-radius:.6rem; }
table{ width:100%; border-collapse:collapse; background:color-mix(in oklab, var(--accent) 94%, black 6%); color:#fff; border-radius:.8rem; overflow:hidden; }
th, td{ padding:.65rem .7rem; border-bottom:1px solid rgba(255,255,255,.18) }
thead th{ background:rgba(0,0,0,.12); font-weight:700; }
tbody tr:hover{ background:rgba(0,0,0,.08) }
.edit-form{ display:flex; gap:.5rem; flex-wrap:wrap; align-items:center; }
.status{ margin-top:.5rem; padding:.6rem .7rem; border-radius:.6rem; }
.status.ok{ background:rgba(39,174,96,.12); border:1px solid var(--ok) }
.status.err{ background:rgba(231,76,60,.12); border:1px solid var(--danger) }
.btn{ background:#2ecc71; color:#fff; border:none; padding:.55rem .9rem; border-radius:.7rem; cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,.18); font-size:.95rem; }
.btn.secondary{ background:rgba(0,0,0,.18) }
.btn.warn{ background:var(--danger) }
.btn:disabled{ opacity:.6; cursor:not-allowed }
#invoicePopup{ position:fixed; inset:0; background:rgba(0,0,0,.5); display:none; align-items:center; justify-content:center; z-index:50; padding:1rem; }
#invoicePopup .popup-inner{ width:min(900px, 96vw); background:#fff; color:var(--ink); border-radius:var(--radius); box-shadow:var(--shadow-lg); overflow:hidden; }
.popup-header, .popup-actions{ display:flex; align-items:center; justify-content:space-between; gap:.5rem; padding:.75rem 1rem; background:var(--accent); color:#fff; position:sticky; top:0; }
.popup-content{ padding:1rem; background:#fff; color:var(--ink); max-height:70vh; overflow:auto; }
.invoice-table{ width:100%; border-collapse:collapse; }
.invoice-table th, .invoice-table td{ border:1px solid #ddd; padding:.5rem; }
.popup-actions .btn{ background:rgba(0,0,0,.18); color:#fff }

@media (max-width:480px){ .menu{ gap:.4rem; padding:.6rem .7rem } .menu button{ padding:.5rem .7rem; font-size:.95rem } .item-row input{ width:7rem; font-size:1rem } }
@media print{ body{ background:#fff; color:#000 } .menu, #content{ display:none !important } #printArea{ display:block } }

/* Dense mode overrides */
body.dense{ --font-base:14px; }
body.dense .menu button{ padding:.28rem .5rem; font-size:.75rem; }
body.dense .card{ padding:.55rem; }
body.dense .section-header{ font-size:.9rem; margin:.1rem 0 .35rem; }
body.dense select, body.dense input[type="text"]{ padding:.25rem .4rem; font-size:.78rem; min-height:1.8rem; }
body.dense .item-row{ margin-bottom:.25rem; gap:.25rem; }
body.dense .item-row input{ width:6rem; font-size:.78rem; }
body.dense .item-row .lineTotal{ padding:.25rem .4rem; font-size:.8rem; }
body.dense th, body.dense td{ padding:.35rem .4rem; font-size:.78rem; }
body.dense .btn{ padding:.3rem .5rem; font-size:.78rem; }
body.dense .delete-btn, body.dense .table-btn{ min-width:1.8rem; min-height:1.8rem; padding:.25rem .35rem; }
